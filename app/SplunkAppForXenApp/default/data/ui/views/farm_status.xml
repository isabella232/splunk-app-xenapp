<?xml version="1.0" encoding="UTF-8"?>
<view onUnloadCancelJob="True" template="dashboard.html">
	<label>Farm Status</label>
	<module name="AccountBar" layoutPanel="appHeader" />
	<module name="AppBar" layoutPanel="appHeader" />
	<module name="SideviewUtils" layoutPanel="appHeader" />

	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>

	<module name="TitleBar" layoutPanel="viewHeader"/>
	<!--<module name="GenericHeader" layoutPanel="panel_row1_col1_grp1"><param name="label">Farm Status</param></module> -->
	<module name="URLLoader" layoutPanel="viewHeader" autoRun="true">

		<module name="TimeRangePicker" layoutPanel="viewHeader">
			<param name="default">Last 60 minutes</param>
			<param name="searchWhenChanged">true</param>

			<module name="Search">
				<param name="search"><![CDATA[ `xenapp_index` `xa_farm_sourcetype` FarmName="$FarmName$" | eval FarmName=upper(FarmName) | stats count by FarmName | table FarmName ]]></param>
				<module name="Pulldown" layoutPanel="viewHeader">
					<param name="name">FarmName</param>
					<param name="size">1</param>
					<param name="width">300px</param>
					<param name="staticFieldsToDisplay"></param>
					<param name="label">Farm Name:</param>
					<param name="searchFieldsToDisplay">
						<list>
							<param name="label">FarmName</param>
							<param name="value">FarmName</param>
						</list>
					</param>

					<module name="GenericHeader" layoutPanel="panel_row2_col1">
						<param name="label">Farm Data</param>
						<module name="Search">
							<param name="search"><![CDATA[ `xenapp_index` `xa_farm_sourcetype` FarmName="$FarmName$" | stats latest(Users) as Users latest(SessionCount) as Sessions latest(Servers) as Servers latest(AdministratorType) as AdminType earliest(*) as junk_* by FarmName | `remove_junk` | Transpose]]></param>
							<module name="SimpleResultsTable">
								<param name="drilldown">row</param>
							</module> <!-- SimpleResultsTable -->
						</module> <!-- Search -->
					</module> <!-- Search -->

					<module name="GenericHeader" layoutPanel="panel_row2_col1">
						<param name="label">Zone Data</param>
						<module name="Search">
							<param name="search"><![CDATA[ `xenapp_index` `xa_zone_sourcetype` FarmName="$FarmName$" | stats latest(DataCollector) as DataCollector latest(FarmName) as FarmName earliest(*) as junk_* by ZoneName | `remove_junk` ]]></param>
							<module name="SimpleResultsTable">
								<param name="drilldown">row</param>
							</module> <!-- SimpleResultsTable -->
						</module> <!-- Search -->
					</module> <!-- Search -->

					<module name="GenericHeader" layoutPanel="panel_row2_col2">
						<param name="label">Servers</param>
						<module name="Search">
							<param name="search"><![CDATA[ `xenapp_index` `xa_server_sourcetype` FarmName="$FarmName$" | stats latest(CitrixProductName) as Product latest(CitrixVersion) as Version latest(CitrixEdition) as Edition latest(LogOnsEnabled) as LogonEnabled latest(ZoneName) as ZoneName earliest(*) as junk_* by ServerName | `remove_junk` ]]></param>
							<module name="SimpleResultsTable">
								<param name="drilldown">row</param>
								<module name="NotSideview">
									<param name="to">server_status</param>
									<param name="butt">ServerName</param>
								</module>
								<!-- <module name="Redirector">
									<param name="url">server_status</param>
									<param name="arg.autoRun">True</param>
									<param name="arg.ServerName">$click.fields.ServerName$</param>
									<param name="arg.earliest">$search.timeRange.earliest$</param>
									<param name="arg.latest">$search.timeRange.latest$</param>
								</module> --> <!-- Redirector#Drill Down -->
							</module> <!-- SimpleResultsTable -->
						</module> <!-- Search -->
					</module> <!-- GenericHeader -->


					<module name="GenericHeader" layoutPanel="panel_row3_col1">
						<param name="label">Applications</param>
						<module name="Search">
							<param name="search"><![CDATA[ `xenapp_index` `xa_application_sourcetype` FarmName="$FarmName$" | stats latest(DisplayName) as DisplayName latest(Description) as Description latest(ApplicationType) as Type latest(FolderPath) as FolderPath earliest(*) as junk_* by BrowserName | `remove_junk`]]></param>
							<module name="Pager">
								<param name="entityName">results</param>
								<module name="SimpleResultsTable">
									<param name="displayMenu">true</param>
									<param name="count">100</param>
								</module>
							</module>
						</module> <!-- Search -->
					</module> <!-- GenericHeader -->

				</module> <!-- Pulldown#host -->
			</module> <!-- Search#host Pulldown -->
		</module> <!-- TimeRangePicker -->
	</module> <!-- URLLoader -->
</view>
