<?xml version="1.0"?>
<view template="dashboard.html" stylesheet="dashboard2.css">
  <label>User List</label>
  <module name="AccountBar" layoutPanel="appHeader"/>
  <module name="AppBar" layoutPanel="navigationHeader"/>
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="clearOnJobDispatch">False</param>
    <param name="maxSize">1</param>
  </module>
  <module name="TitleBar" layoutPanel="viewHeader">
    <param name="actionsMenuFilter">dashboard</param>
  </module>
  <!--
        Global index summary counts
    -->
  <module name="GenericHeader" layoutPanel="panel_row1_col1">
    <param name="label">User Sessions</param>
  </module>
  <module name="StaticContentSample" layoutPanel="panel_row1_col1">
    <param name="text">This report provides details about users who have logged into your environment. Adjust the time range for this report by changing the timerange picker. You can filter this view by entering values in the fields below and pressing enter. Click on a panel to drill into the session details for that element.</param>
  </module>
  <module name="TimeRangePicker" layoutPanel="panel_row1_col1" autoRun="True">
    <param name="default">Last 24 Hours</param>
    <param name="searchWhenChanged">True</param>
    <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp1">
      <param name="label">Host Machine Server:</param>
      <param name="field">HostingServerName</param>
      <param name="replacementMap">
        <param name="arg">
          <param name="HostingServerName">
            <param name="value"/>
          </param>
        </param>
      </param>
      <param name="intention">
        <param name="name">stringreplace</param>
        <param name="arg">
          <param name="HostingServerName">
            <param name="default"/>
            <param name="prefix">HostingServerName="</param>
            <param name="suffix">"</param>
            <param name="fillOnEmpty">false</param>
          </param>
        </param>
      </param>
      <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp2">
        <param name="label">Desktop Catalog:</param>
        <param name="field">CatalogName</param>
        <param name="replacementMap">
          <param name="arg">
            <param name="vm_name">
              <param name="value"/>
            </param>
          </param>
        </param>
        <param name="intention">
          <param name="name">stringreplace</param>
          <param name="arg">
            <param name="CatalogName">
              <param name="default"/>
              <param name="prefix">CatalogName="</param>
              <param name="suffix">"</param>
              <param name="fillOnEmpty">false</param>
            </param>
          </param>
        </param>
        <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp3">
          <param name="label">User:</param>
          <param name="field">user</param>
          <param name="replacementMap">
            <param name="arg">
              <param name="user">
                <param name="value"/>
              </param>
            </param>
          </param>
          <param name="intention">
            <param name="name">stringreplace</param>
            <param name="arg">
              <param name="user">
                <param name="default"/>
                <param name="prefix">user="</param>
                <param name="suffix">"</param>
                <param name="fillOnEmpty">false</param>
              </param>
            </param>
          </param>
          <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp4">
            <param name="label">Desktop Name:</param>
            <param name="field">vm_name</param>
            <param name="replacementMap">
              <param name="arg">
                <param name="vm_name">
                  <param name="value"/>
                </param>
              </param>
            </param>
            <param name="intention">
              <param name="name">stringreplace</param>
              <param name="arg">
                <param name="vm_name">
                  <param name="default"/>
                  <param name="prefix">vm_name="</param>
                  <param name="suffix">"</param>
                  <param name="fillOnEmpty">false</param>
                </param>
              </param>
            </param>
            <module name="HiddenSearch" layoutPanel="panel_row1_col1" autoRun="True">
              <param name="search">`xendesktop_index` `xd_sessions_sourcetype` $user$ $vm_name$ | `session_desktop_lookup` | search $CatalogName$ $HostingServerName$ | `client_name` | `xd_get_duration` | `convert_total_duration` | stats first(SessionState) as SessionState first(SessionUID) as SessionUID first(TotalDuration) as Duration first(BrokeringTime) as BrokeringTime first(CatalogName) as CatalogName first(ClientAddress) as ClientAddress first(HostingServerName) as HostingServerName first(DeviceId) as DeviceId first(client_dvc_type) as client_dvc_type first(HardwareId) as HardwareId first(ClientName) as ClientName first(UserSID) as UserSID first(ClientVersion) as ClientVersion first(ControllerDNSName) as ControllerDNSName first(Protocol) as Protocol first(DesktopSID) as DesktopSID by user vm_name StartTime _time</param>
              <module name="ViewRedirectorLink" layoutPanel="panel_row1_col1">
                <param name="viewTarget">flashtimeline</param>
                <param name="label">View Full Report</param>
              </module>
              <module name="JobProgressIndicator"/>
              <module name="HiddenPostProcess" layoutPanel="panel_row6_col1" group="Unique User Sessions" autoRun="True">
                <param name="search">| dedup SessionUID | stats first(StartTime) as StartTime first(Duration) as Duration first(vm_name) as vm_name first(SessionUID) as SessionUID by user | sort user</param>
                <module name="SimpleResultsTable" layoutPanel="panel_row6_col1">
                  <param name="displayMenu">true</param>
                  <param name="count">100</param>
                  <param name="drilldown">row</param>
                  <param name="entityName">results</param>
                  <param name="displayRowNumbers">False</param>
                </module>
              </module>
            </module>
          </module>
        </module>
      </module>
    </module>
  </module>
</view>
