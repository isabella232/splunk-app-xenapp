<view template="dashboard.html" stylesheet="dashboard2.css">
  <label>Environment</label>
  <module name="AccountBar" layoutPanel="appHeader" />
  <module name="AppBar" layoutPanel="navigationHeader" />
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="clearOnJobDispatch">False</param>
    <param name="maxSize">1</param>
  </module>
  <module name="TitleBar" layoutPanel="viewHeader">
    <param name="actionsMenuFilter">dashboard</param>
  </module>
  <!--
        Global index summary counts
    -->
  <module name="GenericHeader" layoutPanel="panel_row1_col1">
    <param name="label">Splunk for XenDesktop</param>
  </module>
  <module name="StaticContentSample" layoutPanel="panel_row1_col1">
    <param name="text">This report provides details about the XenApp sessions in your environment. Adjust the time range for this report by changing the timerange picker. You can filter this view by entering values in the fields below and pressing enter.</param>
  </module>
  <module name="TimeRangePicker" layoutPanel="panel_row1_col1">
    <param name="selected">first 24 Hours</param>
    <param name="searchWhenChanged">True</param>
    <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp1">
      <param name="label">Farm:</param>
      <param name="field">FarmName</param>
      <param name="replacementMap">
        <param name="arg">
          <param name="FarmName">
            <param name="value"></param>
          </param>
        </param>
      </param>
      <param name="intention">
        <param name="name">stringreplace</param>
        <param name="arg">
          <param name="FarmName">
            <param name="default"></param>
            <param name="prefix">FarmName="</param>
            <param name="suffix">"</param>
            <param name="fillOnEmpty">false</param>
          </param>
        </param>
      </param>
      <module name="ExtendedFieldSearch" layoutPanel="panel_row2_col1_grp2">
        <param name="label">Zone Name:</param>
        <param name="field">ZoneName</param>
        <param name="replacementMap">
          <param name="arg">
            <param name="ZoneName">
              <param name="value"></param>
            </param>
          </param>
        </param>
        <param name="intention">
          <param name="name">stringreplace</param>
          <param name="arg">
            <param name="ZoneName">
              <param name="default"></param>
              <param name="prefix">ZoneName="</param>
              <param name="suffix">"</param>
              <param name="fillOnEmpty">false</param>
            </param>
          </param>
        </param>
        <module name="HiddenSearch" layoutPanel="panel_row3_col1" autoRun="True">
          <param name="search">index=xenapp sourcetype="CitrixXA6:Farm" $ZoneName$ $FarmName$| head 5000 | stats first(Servers) as Servers first(Applications) as Applications first(Desktops) as Desktops first(SessionCount) as Sessions first(Users) as Users by FarmName</param>
          <module name="JobProgressIndicator"></module>
          <module name="SimpleResultsTable">
            <param name="displayMenu">true</param>
            <param name="count">100</param>
            <param name="drilldown">all</param>
            <param name="entityName">results</param>
            <param name="displayRowNumbers">False</param>
          </module>
        </module>
        <module name="HiddenSearch" layoutPanel="panel_row4_col1" autoRun="True" group="Server Alerts">
          <param name="search">index=xendt_alerts $FarmName$ $ZoneName$ bd-xa*| eval MachineName=lower(vm_name) | rename alert_name as Alert | stats count as Number by Alert</param>
          <module name="ViewRedirectorLink">
            <param name="viewTarget">flashtimeline</param>
            <param name="label">View Alert Data</param>
          </module>
          <module name="JobProgressIndicator"></module>
          <module name="SimpleResultsTable">
            <param name="displayMenu">true</param>
            <param name="count">100</param>
            <param name="drilldown">all</param>
            <param name="entityName">results</param>
            <param name="displayRowNumbers">False</param>
          </module>
        </module>
        <module name="HiddenSearch" layoutPanel="panel_row4_col2" autoRun="True" group="Errors by Server">
          <param name="search">index=winevents Type=error host=bd-xa* | stats count as Count by host,SourceName | sort -Count | rename host as Server | rename SourceName as Source</param>
          <module name="ViewRedirectorLink">
            <param name="viewTarget">flashtimeline</param>
            <param name="label">View Error Data</param>
          </module>
          <module name="JobProgressIndicator"></module>
          <module name="SimpleResultsTable">
            <param name="displayMenu">true</param>
            <param name="count">100</param>
            <param name="drilldown">all</param>
            <param name="entityName">results</param>
            <param name="displayRowNumbers">False</param>
          </module>
        </module>
        <module name="HiddenSearch" layoutPanel="panel_row4_col3" autoRun="True" group="Zone Info">
          <param name="search">index=xenapp sourcetype="CitrixXA6:Session" Protocol!="console" State!="Listening" | fields ServerName, LogOnTime, SessionId, AccountName, ZoneName, FarmName | lookup xa_zone_farm ServerName |eval ep_LogOnTime=strptime(LogOnTime,"%m/%d/%Y %H:%M:%S") | eval Session_GUID=ep_LogOnTime.SessionId.ServerName | stats dc(Session_GUID) as Sessions dc(AccountName) as Users by ZoneName, FarmName| strcat Sessions "(" Users ")" Session(User) | table ZoneName Session(User) FarmName</param>
          <module name="ViewRedirectorLink">
            <param name="viewTarget">flashtimeline</param>
            <param name="label">View Error Data</param>
          </module>
          <module name="JobProgressIndicator"></module>
          <module name="SimpleResultsTable">
            <param name="displayMenu">true</param>
            <param name="count">100</param>
            <param name="drilldown">all</param>
            <param name="entityName">results</param>
            <param name="displayRowNumbers">False</param>
          </module>
          <module name="HiddenSearch" layoutPanel="panel_row5_col1" autoRun="True" group="ICA Sessions over Time">
            <param name="search">index=xenapp sourcetype="CitrixXA6:Session" Protocol!="console" State!="Listening" | fields LogOnTime, SessionId, AccountName, ServerName, FarmName |eval ep_LogOnTime=strptime(LogOnTime,"%m/%d/%Y %H:%M:%S") | eval Session_GUID=ep_LogOnTime.SessionId.ServerName | timechart dc(Session_GUID) as Sessions by FarmName| eval Sessions=if(Sessions=="0",blank,Sessions)</param>
            <module name="ViewRedirectorLink">
              <param name="viewTarget">flashtimeline</param>
              <param name="label">View Error Data</param>
            </module>
            <module name="JobProgressIndicator"></module>
            <module name="HiddenChartFormatter">
              <param name="chart">line</param>
              <param name="chart.nullValueMode">connect</param>
              <param name="legend.placement">bottom</param>
              <param name="primaryAxisTitle.text">Sessions</param>
              <module name="FlashChart"></module>
            </module>
          </module>
          <module name="HiddenSearch" layoutPanel="panel_row5_col2" autoRun="True" group="Users Over Time">
            <param name="search">index=xenapp sourcetype="CitrixXA6:Session" Protocol!="console" State!="Listening" | timechart dc(AccountName) as Users by FarmName | eval Users=if(Users=="0",blank,Users)</param>
            <module name="ViewRedirectorLink">
              <param name="viewTarget">flashtimeline</param>
              <param name="label">View Error Data</param>
            </module>
            <module name="JobProgressIndicator"></module>
            <module name="HiddenChartFormatter">
              <param name="chart">line</param>
              <param name="legend.placement">bottom</param>
              <param name="chart.nullValueMode">connect</param>
              <param name="primaryAxisTitle.text">Users</param>
              <module name="FlashChart"></module>
            </module>
          </module>
        </module>
      </module>
    </module>
  </module>
</view>
